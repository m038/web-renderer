services:
    swp_renderer.phpcr.initializer:
        class: Doctrine\Bundle\PHPCRBundle\Initializer\GenericInitializer
        arguments:
            - SWP ContentBundle paths
            - [ "/swp/content" ]
        tags:
            - { name: "doctrine_phpcr.initializer" }

    swp_template_engine.loader.article:
        class: SWP\ContentBundle\Loader\ArticleLoader
        arguments:
            - %kernel.root_dir%
            - @doctrine_phpcr.odm.document_manager
        tags:
            - { name: swp.meta_loader }

    document_manager:
        alias: doctrine_phpcr.odm.document_manager

    storage:
        class: SWP\ContentBundle\Storage\Doctrine\PHPCRStorage
        arguments:
            - document_manager

    manager.article:
        class: SWP\ContentBundle\Manager\ArticleManager
        arguments:
            - storage
            - %swp_content.document.version_class%
            - %swp_content.document.locale_class%
